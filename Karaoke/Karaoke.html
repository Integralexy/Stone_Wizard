<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Karaoke Night</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f9fc;
    max-width: 700px;
    margin: 40px auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  .question { display: none; margin-bottom: 20px; }
  .question.active { display: block; }
  .response {
    background: #eaf4e1;
    border-left: 5px solid #4CAF50;
    padding: 10px;
    margin-top: 10px;
    display: none;
  }
  button {
    margin-top: 10px;
    background-color: #007bff;
    color: white;
    padding: 10px 14px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover { background-color: #0056b3; }
</style>
</head>
<body>

<h2> So you want to get drunk and sing with this guy:</h2>

<form id="quizForm">
  <!-- Question 1 -->
  <div class="question active" data-question="1" data-response="Interesting! Blue often symbolizes calmness and trust.">
    <p> Which area will you be leaving from? </p>
    <label><input type="radio" name="q1" value="U"> Udistrict </label><br>
    <label><input type="radio" name="q1" value="F"> Fremont </label><br>
    <label><input type="radio" name="q1" value="C"> Cap Hill </label><br>
    <label><input type="radio" name="q1" value="N"> Northgate </label><br>
    <label><input type="radio" name="q1" value="H"> Heaven ðŸ˜‰ </label><br>
    <button type="button" onclick="submitAnswer(1)">Submit Answer</button>
    <div class="response" id="response1"></div>
    <button type="button" onclick="nextQuestion()" style="display:none;" id="next1">Continue</button>
  </div>

  <!-- Question 2 -->
  <div class="question" data-question="2" data-response="Good to know! Sleep is crucial for good health.">
    <p> What vibes are you looking for? </p>
    <label><input type="radio" name="q2" value="Monkey"> "Dive bar with carpet" </label><br>
    <label><input type="radio" name="q2" value="Finns"> "Chill Cocktail bar with snacks" </label><br>
    <label><input type="radio" name="q2" value="Rock"> "Sports bar with a hint of Celtic vibes" </label><br>
    <label><input type="radio" name="q2" value="Hula"> "I've always wanted to go to a Luau" </label><br>
    <label><input type="radio" name="q2" value="Fruit"> "Something a little fruity" </label><br>
    <button type="button" onclick="submitAnswer(2)">Submit Answer</button>
    <div class="response" id="response2"></div>
    <button type="button" onclick="nextQuestion()" style="display:none;" id="next2">Continue</button>
  </div>
  

  <!-- Question 3 -->
  <div class="question" data-question="3" data-response="Good to know! Sleep is crucial for good health.">
    <p> Do you prefer singing infront of an audience or just among friends? </p>
    <label><input type="radio" name="q3" value="star"> "I am the star" </label><br>
    <label><input type="radio" name="q3" value="shy"> "I'm a bit shy" </label><br>
    <label><input type="radio" name="q3" value="none"> "I don't have a preference" </label><br>
    <button type="button" onclick="submitAnswer(3)">Submit Answer</button>
    <div class="response" id="response2"></div>
    <button type="button" onclick="nextQuestion()" style="display:none;" id="next3">Continue</button>
  </div>

    <!-- Q4 -->
  <div class="question active" data-question="4">
    <p>Before you get five drinks in, whats your first order?</p>
    <label><input type="radio" name="q4" value="beer"> A beer </label><br>
    <label><input type="radio" name="q4" value="cider"> "A cider" </label><br>
    <label><input type="radio" name="q4" value="wine"> "Wine" </label><br>
    <label><input type="radio" name="q4" value="shot"> "A shot" </label><br>
    <button type="button" onclick="submitAnswer(4)">Submit Answer</button>
    <div class="response" id="response4"></div>

    <!-- Conditional sub-questions (hidden by default) -->
    <div id="q4a" class="question sub">
      <p>What kind of beer?</p>
      <label><input type="radio" name="q4a" value="IPA"> An IPA </label><br>
      <label><input type="radio" name="q4a" value="dark"> Something dark </label><br>
      <label><input type="radio" name="q4a" value="cheap"> The cheaper the better </label><br>
      <button type="button" onclick="submitAnswer('4a')">Submit Answer</button>
      <div class="response" id="response4a"></div>
      <button type="button" onclick="nextQuestion()" style="display:none;" id="next4a">Continue</button>
    </div>

    <div id="q4b" class="question sub">
      <p> What kind of wine? </p>
      <label><input type="radio" name="q4b" value="red"> Red </label><br>
      <label><input type="radio" name="q4b" value="rose"> RosÃ© </label><br>
      <label><input type="radio" name="q4b" value="white"> White </label><br>
      <button type="button" onclick="submitAnswer('4b')">Submit Answer</button>
      <div class="response" id="response4b"></div>
      <button type="button" onclick="nextQuestion()" style="display:none;" id="next4b">Continue</button>
    </div>

    <div id="q4c" class="question sub">
      <p> What kind of shot? </p>
      <label><input type="radio" name="q4c" value="vod"> Vodka </label><br>
      <label><input type="radio" name="q4c" value="teq"> Tequila </label><br>
      <label><input type="radio" name="q4c" value="whis"> Whiskey </label><br>
      <button type="button" onclick="submitAnswer('4c')">Submit Answer</button>
      <div class="response" id="response4c"></div>
      <button type="button" onclick="nextQuestion()" style="display:none;" id="next4c">Continue</button>
    </div>
  </div>
  
  <!-- Question 3 -->
  <div class="question" data-question="3" data-response="That's inspiring! Motivation keeps us going.">
    <p>3. What motivates you most?</p>
    <input type="text" name="q3" placeholder="Your answer here" style="width:100%;padding:8px;"><br>
    <button type="button" onclick="submitAnswer(3)">Submit Answer</button>
    <div class="response" id="response3"></div>
    <button type="button" onclick="nextQuestion()" style="display:none;" id="next3">Submit All</button>
  </div>
</form>

<div id="finalResult" style="display:none; background:#e2f0d9; padding:15px; border-radius:8px; margin-top:20px;">
  <h3>Thank you for completing the questionnaire!</h3>
  <p>Your answers have been recorded.</p>
</div>

<script>
let currentQuestion = 1;
const totalQuestions = 3;
const answers = {};
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxmO2ih5aR9x8W_Y3Ejfk0M44PVNoxWD29avZdZbveCTjHTjuaRkvKU8oD0FZ3lul0q/exec"; // <--- Replace with your Apps Script URL


  const responses = {
  1: {
    "U": "You must study hard! ðŸ‘©â€ðŸ«",
    "F": "Its giving artsy! ðŸ‘©â€ðŸŽ¨",
    "C": "You definitely know how to party! ðŸ¥³",
    "N": "Very refined and mature! ðŸŽ©",
    "H": "I had a feeling, but didn't want to assume ðŸ˜"
  },
  2: {
    "Monk": "Then you can beat me in a game of pool afterwards ðŸŽ±",
    "Finn": "Hopefully you like Guinness â˜˜ï¸",
    "Rock": "I too like to feel fancy ðŸ¸ (and enjoy snacks)",
    "Hula": "I'll need an umbrella in my drink ðŸ¹",
    "Fruit": "Good thing we're in Seattle ðŸ™ï¸"
  }
  3: {
    "star": "I commend your bravery ðŸ«¡",
    "shy": "Same, I'm just a lil guy ðŸ¥ºðŸ‘‰ðŸ‘ˆ",
    "none": "No problem! I'll embarrass myself either way ðŸ—£ï¸"
  },
  4: {
    "beer": " ",
    "cider": "Is this how you got so sweet? ðŸ˜œ",
    "wine": " ",
    "shot": " "
  },
  "4a": {
    "IPA": "Are we talking beer or the International Phonetic Alphabet? ðŸ”¤",
    "dark": "First round is definitely on me ðŸ»",
    "cheap": "Ah, a connoisseur of the financially efficient lager ðŸº"
  },
  "4b": {
    "red": "Pairs well with good company ðŸ·",
    "rose": "Maybe one as sweet as you? ðŸŒ¹",
    "white": "Perfect â€” something light to match that smile ðŸ˜Œ"
  },
  "4c": {
    "vod": "I too like to live dangerously âš ï¸",
    "teq": "Tequila makes me want to dance ðŸ•º",
    "whis": "Whiskey on the rocks? I might start melting ðŸ¥ƒ"
  },
};
  

function submitAnswer(qNum) {
  const questionDiv = (typeof qNum === "string") 
    ? document.getElementById(`q${qNum}`)
    : document.querySelector(`.question[data-question="${qNum}"]`);

  const inputs = questionDiv.querySelectorAll('input');
  let value = null;

  inputs.forEach(input => {
    if (input.type === 'radio' && input.checked) value = input.value;
  });

  if (!value) {
    alert("Please select an answer first!");
    return;
  }

  answers[`q${qNum}`] = value;
  let responseText = responses[qNum][value] || "Interesting choice!";
  const responseDiv = document.getElementById(`response${qNum}`);
  responseDiv.textContent = responseText;
  responseDiv.style.display = "block";

  // Conditional branching: reveal sub-questions
  if (qNum === 1) {
    if (value === "Yes") {
      document.getElementById("q1a").style.display = "block";
      document.getElementById("q1b").style.display = "none";
    } else {
      document.getElementById("q1b").style.display = "block";
      document.getElementById("q1a").style.display = "none";
    }
  } else {
    // show continue button for regular or sub-question
    const nextBtn = document.getElementById(`next${qNum}`);
    if (nextBtn) nextBtn.style.display = "inline-block";
  }

  // Record in Google Sheet (including emoji response)
  fetch(SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      question: `Question ${qNum}`,
      answer: value,
      response: responseText
    })
  });
}

function nextQuestion() {
  const current = document.querySelector(`.question[data-question="${currentQuestion}"]`);
  if (current) current.classList.remove('active');
  currentQuestion++;
  document.querySelector(`.question[data-question="${currentQuestion}"]`).classList.add('active');
}

function finishQuiz() {
  document.getElementById('quizForm').style.display = 'none';
  document.getElementById('finalResult').style.display = 'block';
  console.log("All answers:", answers);
}
</script>

</body>
</html>

