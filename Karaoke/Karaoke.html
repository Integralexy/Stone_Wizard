<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> Karaoke Night </title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f7fa;
    max-width: 700px;
    margin: 40px auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  .question {
    display: none;
    margin-bottom: 20px;
  }
  .question.active {
    display: block;
  }
  .response {
    background: #eaf4e1;
    border-left: 5px solid #4CAF50;
    padding: 10px;
    margin-top: 10px;
    display: none;
  }
  button {
    margin-top: 10px;
    background-color: #007bff;
    color: white;
    padding: 10px 14px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover {
    background-color: #0056b3;
  }
</style>
</head>
<body>

<h2> So you want to get drunk and sing with this guy:</h2>

<form id="quizForm">
  <!-- Question 1 -->
  <div class="question active" data-question="1" data-response="Interesting! Blue often symbolizes calmness and trust.">
    <p> Which area will you be leaving from?</p>
    <label><input type="radio" name="q1" value="U"> Udistrict </label><br>
    <label><input type="radio" name="q1" value="F"> Fremont </label><br>
    <label><input type="radio" name="q1" value="C"> Cap Hill </label><br>
    <label><input type="radio" name="q1" value="N"> Northgate </label><br>
    <label><input type="radio" name="q1" value="H"> Heaven ;) </label><br>
    <button type="button" onclick="submitAnswer(1)">Submit Answer</button>
    <div class="response" id="response1"></div>
    <button type="button" onclick="nextQuestion()" style="display:none;" id="next1">Continue</button>
  </div>

  <!-- Question 2 -->
  <div class="question" data-question="2" data-response="Good to know! Sleep is crucial for good health.">
    <p>2. How many hours do you sleep on average?</p>
    <label><input type="radio" name="q2" value="4"> 4 or fewer</label><br>
    <label><input type="radio" name="q2" value="6"> 5â€“6 hours</label><br>
    <label><input type="radio" name="q2" value="8"> 7â€“8 hours</label><br>
    <button type="button" onclick="submitAnswer(2)">Submit Answer</button>
    <div class="response" id="response2"></div>
    <button type="button" onclick="nextQuestion()" style="display:none;" id="next2">Continue</button>
  </div>

  <!-- Question 3 -->
  <div class="question" data-question="3" data-response="That's inspiring! Motivation keeps us going.">
    <p>3. What motivates you most?</p>
    <input type="text" name="q3" placeholder="Your answer here" style="width:100%;padding:8px;"><br>
    <button type="button" onclick="submitAnswer(3)">Submit Answer</button>
    <div class="response" id="response3"></div>
    <button type="button" onclick="finishQuiz()" style="display:none;" id="next3">Submit All</button>
  </div>
</form>

<div id="finalResult" style="display:none; background:#e2f0d9; padding:15px; border-radius:8px; margin-top:20px;">
  <h3>Thank you for completing the questionnaire!</h3>
  <p>Your answers have been recorded.</p>
</div>

<script>
let currentQuestion = 1;
const totalQuestions = 3;
const answers = {};
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxmO2ih5aR9x8W_Y3Ejfk0M44PVNoxWD29avZdZbveCTjHTjuaRkvKU8oD0FZ3lul0q/exec"; // <--- Replace with your Apps Script URL


  const responses = {
  1: {
    "U": "You must study hard!",
    "F": "Its giving artsy!",
    "C": "You definitely know how to party!",
    "N": "Very refined and mature!",
    "H": "I could tell but didn't want to assume ;D",
  },
  2: {
    "4": "Thatâ€™s not much sleep â€” consider getting more rest.",
    "6": "Better, but still could use a bit more sleep.",
    "8": "Perfect! Youâ€™re well-rested and healthy."
  },
  3: {
    "4": "Thatâ€™s not much sleep â€” consider getting more rest.",
    "6": "Better, but still could use a bit more sleep.",
    "8": "Perfect! Youâ€™re well-rested and healthy."
  }
};
  

function submitAnswer(qNum) {
  const questionDiv = document.querySelector(`.question[data-question="${qNum}"]`);
  const inputs = questionDiv.querySelectorAll('input');
  let value = null;

  inputs.forEach(input => {
    if ((input.type === 'radio' && input.checked) || input.type === 'text') {
      value = input.value.trim();
    }
  });

  if (!value) {
    alert('Please select or enter an answer before submitting.');
    return;
  }

  answers[`q${qNum}`] = value;

  // Example scoring
  let score = 0;
  if (qNum === 1 && value === "Blue") score = 5;
  if (qNum === 2 && value === "8") score = 5;
  if (qNum === 3 && value.length > 0) score = 2;

  // ðŸŽ¯ Get conditional response text
  let responseText = "";
  if (typeof responses[qNum] === "object") {
    responseText = responses[qNum][value] || "Interesting choice!";
  } else {
    responseText = responses[qNum];
  }

  // Show response
  const responseDiv = document.getElementById(`response${qNum}`);
  responseDiv.textContent = responseText;
  responseDiv.style.display = "block";

  // Show Continue button
  document.getElementById(`next${qNum}`).style.display = "inline-block";

  // Send data to Google Sheet
  fetch(SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      question: `Question ${qNum}`,
      answer: value,
      score: score
    })
  });
}

function nextQuestion() {
  const current = document.querySelector(`.question[data-question="${currentQuestion}"]`);
  if (currentQuestion < totalQuestions) {
    current.classList.remove('active');
    currentQuestion++;
    document.querySelector(`.question[data-question="${currentQuestion}"]`).classList.add('active');
  }
}

function finishQuiz() {
  document.getElementById('quizForm').style.display = 'none';
  document.getElementById('finalResult').style.display = 'block';
  console.log('Answers:', answers);
}
</script>

</body>
</html>

